apiVersion: apiextensions.crossplane.io/v1alpha1
kind: ManagedResourceActivationPolicy
metadata:
  name: {{ .Release.Name }}
spec:
  activate:
  - 'policies.iam.aws.upbound.io'
  - 'rolepolicyattachments.iam.aws.upbound.io'
  - 'roles.iam.aws.upbound.io'
{{- if .Values.global.createObservers }}
{{- if .Values.global.aws.vpc.id }}
  - 'vpcs.ec2.aws.upbound.io'
  - 'subnets.ec2.aws.upbound.io'
  - 'securitygroups.ec2.aws.upbound.io'
{{- end }}
{{- if .Values.global.aws.vpc.database_subnet_group_name }}
  - 'subnetgroups.rds.aws.upbound.io'
{{- end }}
{{- if .Values.global.aws.kms.data_key_arn }}
  - 'keys.kms.aws.upbound.io'
  - 'aliases.kms.aws.upbound.io'
{{- end }}
{{- if .Values.global.aws.eks.cluster_name }}
  - 'clusters.eks.aws.upbound.io'
  - 'nodegroups.eks.aws.upbound.io'
  - 'launchtemplates.ec2.aws.upbound.io'
{{- end }}
{{- end }}
{{- if .Values.global.createNamespacedObservers }}
  - 'policies.iam.aws.m.upbound.io'
  - 'rolepolicyattachments.iam.aws.m.upbound.io'
  - 'roles.iam.aws.m.upbound.io'
{{- if .Values.global.aws.vpc.id }}
  - 'vpcs.ec2.aws.m.upbound.io'
  - 'subnets.ec2.aws.m.upbound.io'
  - 'securitygroups.ec2.aws.m.upbound.io'
{{- end }}
{{- if .Values.global.aws.vpc.database_subnet_group_name }}
  - 'subnetgroups.rds.aws.m.upbound.io'
{{- end }}
{{- if .Values.global.aws.kms.data_key_arn }}
  - 'keys.kms.aws.m.upbound.io'
  - 'aliases.kms.aws.m.upbound.io'
{{- end }}
{{- if .Values.global.aws.eks.cluster_name }}
  - 'clusters.eks.aws.m.upbound.io'
{{- end }}
{{- end }}
